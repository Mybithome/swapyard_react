<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><meta name="description" content="Web site created using create-react-app"/><link rel="apple-touch-icon" href="/logo192.png"/><link rel="manifest" href="/manifest.json"/><title>React App</title><script src="https://cdnjs.cloudflare.com/ajax/libs/big.js/2.3.0/big.min.js" integrity="sha512-FRFtxO3b4HKkMcWJ/Yv7tQp+WwWMSPLDlAO5hn1TbNgswaE+RAFESuBbulWR/PNeTq9d4DS/hyEZbcZRAqlYwQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.4/web3.min.js" integrity="sha512-oMd9Re3VgJcXuZJn9DN6X7S7JUc7xLYZ2UyZ85Mm/xzaW3lwBr4fV2zjuu/n5jY/Of/2JOx35CTa6zvQNxb31Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script><script>let totalBuys,html,avgPrice,selectedTokenAddress,buyExchange,sellExchange,borrowAmount,prices=[],buys=[],loanTokenAddress="0x2791bca1f2de4661ed88a30c99a7a9449aa84174",days=1,rightNow=new Date,DaysAgo=new Date;DaysAgo.setDate(DaysAgo.getDate()-days);const web3=new Web3(window.ethereum),getERC20ABI=$.getJSON("../contracts/IERC20.json"),getRouterABI=$.getJSON("../contracts/IUniswapV2Router02.json"),getFactoryABI=$.getJSON("../contracts/IUniswapV2Factory.json"),getExchangeRouters=$.getJSON("../exchangeDetails.json"),getArbitrageABI=$.getJSON("../contracts/Arbitrage.json"),getPairABI=$.getJSON("../contracts/IUniswapV2Pair.json"),getDODOFactoryABI=$.getJSON("../contracts/DODOFactory.json"),getDODOPoolABI=$.getJSON("../contracts/IDODO.json"),getSavedImages=$.getJSON("../coinImages.json");let userAddress,DODOPoolABI,DODOPoolContract,flashLoanPool,flashLoanPools,flashLoanFactory,DODOFactoryABI,loanTokenABI,loanTokenContract,ArbitrageABI,arbitrageContract,IUniswapV2Factory,IUniswapV2Router02,IUniswapv2Pair,exchangeRouters,buyFactory,sellFactory,buyPairAddress,sellPairAddress,buyPairContract,sellPairContract,buyReserves,buyPrice,calcBuyPrice,sellReserves,sellPrice,calcSellPrice,difference,buyAmountMax,trueBuyPriceTokenA,trueBuyPriceTokenB,trueSellPriceTokenA,trueSellPriceTokenB,maxBuySpend,maxSellSpend,maxSwap,buyAmountsOut,sellAmountsOut,estimatedGas,savedImages,imageUrl,path=[];async function testClick(){getFlashLoanPool(),void 0!==window.ethereum&&console.log("MetaMask is installed!"),ArbitrageABI=await getArbitrageABI.responseJSON,arbitrageContract=await new web3.eth.Contract(ArbitrageABI.abi,"0x41d641885b2721106B72D4c3033cC3a19b382EBb"),loanTokenABI=await getERC20ABI.responseJSON,loanTokenContract=new web3.eth.Contract(loanTokenABI.abi,loanTokenAddress),exchangeRouters=await getExchangeRouters.responseJSON,IUniswapV2Pair=await getPairABI.responseJSON,IUniswapV2Router=await getRouterABI.responseJSON,IUniswapV2Factory=await getFactoryABI.responseJSON,buyFactory=await new web3.eth.Contract(IUniswapV2Factory.abi,buyExchange),buyFactory.setProvider(web3.currentProvider),buyRouter=await new web3.eth.Contract(IUniswapV2Router.abi,exchangeRouters[buyExchange]),buyRouter.setProvider(web3.currentProvider),sellFactory=await new web3.eth.Contract(IUniswapV2Factory.abi,sellExchange),sellFactory.setProvider(web3.currentProvider),sellRouter=await new web3.eth.Contract(IUniswapV2Router.abi,exchangeRouters[sellExchange]),sellRouter.setProvider(web3.currentProvider),buyPairAddress=await buyFactory.methods.getPair(loanTokenAddress,selectedTokenAddress).call(),sellPairAddress=await sellFactory.methods.getPair(loanTokenAddress,selectedTokenAddress).call(),buyPairContract=await new web3.eth.Contract(IUniswapV2Pair.abi,buyPairAddress),sellPairContract=await new web3.eth.Contract(IUniswapV2Pair.abi,sellPairAddress),buyReserves=await buyPairContract.methods.getReserves().call(),sellReserves=await sellPairContract.methods.getReserves().call(),calcBuyPrice=Big(buyReserves[0]).div(Big(buyReserves[1])).toString(),calcSellPrice=Big(sellReserves[0]).div(Big(sellReserves[1])).toString(),difference=((calcBuyPrice-calcSellPrice)/calcSellPrice*100).toFixed(2),buyPrice<1?(trueBuyPriceTokenA=1e17,trueBuyPriceTokenB=1e17*buyPrice):buyPrice>10?(trueBuyPriceTokenA=1e16,trueBuyPriceTokenB=1e16*buyPrice):buyPrice>100?(trueBuyPriceTokenA=1e15,trueBuyPriceTokenB=1e15*buyPrice):buyPrice>1e3?(trueBuyPriceTokenA=1e14,trueBuyPriceTokenB=1e14*buyPrice):buyPrice>1e4?(trueBuyPriceTokenA=1e13,trueBuyPriceTokenB=1e13*buyPrice):buyPrice>1e5?(trueBuyPriceTokenA=1e12,trueBuyPriceTokenB=1e12*buyPrice):buyPrice>1e6?(trueBuyPriceTokenA=1e11,trueBuyPriceTokenB=1e11*buyPrice):buyPrice>1e7?(trueBuyPriceTokenA=1e10,trueBuyPriceTokenB=1e10*buyPrice):buyPrice>1e8?(trueBuyPriceTokenA=1e9,trueBuyPriceTokenB=1e9*buyPrice):buyPrice>1e9?(trueBuyPriceTokenA=1e8,trueBuyPriceTokenB=1e8*buyPrice):buyPrice>1e10?(trueBuyPriceTokenA=1e7,trueBuyPriceTokenB=1e7*buyPrice):buyPrice>1e11?(trueBuyPriceTokenA=1e6,trueBuyPriceTokenB=1e6*buyPrice):buyPrice>1e12&&(trueBuyPriceTokenA=1e5,trueBuyPriceTokenB=1e5*buyPrice),sellPrice<1?(trueSellPriceTokenA=1e17,trueSellPriceTokenB=1e17*sellPrice):sellPrice>10?(trueSellPriceTokenA=1e16,trueSellPriceTokenB=1e16*sellPrice):sellPrice>100?(trueSellPriceTokenA=1e15,trueSellPriceTokenB=1e15*sellPrice):sellPrice>1e3?(trueSellPriceTokenA=1e14,trueSellPriceTokenB=1e14*sellPrice):sellPrice>1e4?(trueSellPriceTokenA=1e13,trueSellPriceTokenB=1e13*sellPrice):sellPrice>1e5?(trueSellPriceTokenA=1e12,trueSellPriceTokenB=1e12*sellPrice):sellPrice>1e6?(trueSellPriceTokenA=1e11,trueSellPriceTokenB=1e11*sellPrice):sellPrice>1e7?(trueSellPriceTokenA=1e10,trueSellPriceTokenB=1e10*sellPrice):sellPrice>1e8?(trueSellPriceTokenA=1e9,trueSellPriceTokenB=1e9*sellPrice):sellPrice>1e9?(trueSellPriceTokenA=1e8,trueSellPriceTokenB=1e8*sellPrice):sellPrice>1e10?(trueSellPriceTokenA=1e7,trueSellPriceTokenB=1e7*sellPrice):sellPrice>1e11?(trueSellPriceTokenA=1e6,trueSellPriceTokenB=1e6*sellPrice):sellPrice>1e12&&(trueSellPriceTokenA=1e5,trueSellPriceTokenB=1e5*sellPrice),path[0]=loanTokenAddress,path[1]=selectedTokenAddress,buyAmountsOut=await buyRouter.methods.getAmountsOut(web3.utils.BN(maxBuySpend),path).call(),path[0]=selectedTokenAddress,path[1]=loanTokenAddress,sellAmountsOut=await sellRouter.methods.getAmountsOut(web3.utils.BN(buyAmountsOut[1]),path).call();let e=sellAmountsOut[1]-buyAmountsOut[0];setTimeout((function(){$(".reserves_delta .label_right").html(difference),$(".buy_return  .label_right").html(buyAmountsOut[0]),$(".sell_return .label_right").html(sellAmountsOut[1]),$(".estimated_return .label_right").html(e)}),100),loanTokenABI=await getERC20ABI.responseJSON,loanTokenContract=await new web3.eth.Contract(loanTokenABI.abi,loanTokenAddress),estimatedGas=await loanTokenContract.methods.approve("0x41d641885b2721106B72D4c3033cC3a19b382EBb",maxBuySpend).estimateGas({from:`${userAddress}`}),await loanTokenContract.methods.approve("0x41d641885b2721106B72D4c3033cC3a19b382EBb",maxBuySpend).send({from:`${userAddress}`,gasPrice:`${web3.utils.toWei(estimatedGas.toString())}`,maxFeePerGas:web3.utils.toWei("40","Gwei").toString(),maxPriorityFeePerGas:web3.utils.toWei("30","Gwei").toString()})}async function sendClick(){ArbitrageABI=await getArbitrageABI.responseJSON,arbitrageContract=await new web3.eth.Contract(ArbitrageABI.abi,"0x3825b1dA21a35d16a0aD08Fc2Eb0BB5852a43cAD"),console.log("estimating gas..."),estimatedGas=await arbitrageContract.methods.executeTrade(flashLoanPool,loanTokenAddress,selectedTokenAddress,web3.utils.BN(maxBuySpend),exchangeRouters[buyExchange],exchangeRouters[sellExchange],userAddress).estimateGas({from:`${userAddress}`}),console.log(`estimated Gas Arbitrage: ${estimatedGas}`),await arbitrageContract.methods.executeTrade(flashLoanPool,loanTokenAddress,selectedTokenAddress,web3.utils.BN(maxBuySpend),exchangeRouters[buyExchange],exchangeRouters[sellExchange],userAddress).send({from:`${userAddress}`,gasPrice:`${web3.utils.toWei(estimatedGas.toString())}`,maxFeePerGas:web3.utils.toWei("40","Gwei").toString(),maxPriorityFeePerGas:web3.utils.toWei("30","Gwei").toString()})}async function buyClick(e,r,t){buyPrice=t,$(".selected_cards .buy_card").replaceWith(e),buyExchange=r}async function sellClick(e,r,t){sellPrice=t,console.log(r),$(".selected_cards .sell_card").replaceWith(e),sellExchange=r}async function swapClick(e,r){selectedTokenAddress=r,$(".selected_cards .swap_card").replaceWith(e);let t=(await getExchanges(r)).data.ethereum.dexTrades;for(i=0;i<t.length;i++){buildBuys(t[i].exchange.address.address,r,t[i].baseCurrency.symbol)}setTimeout((function(){let e=prices.reduce(((e,r)=>e+r),0);console.log(e),avgPrice=e/prices.length,buys.sort((function(e,r){return e.price-r.price})),buys.reverse(),createBuys(buys),buys.reverse(),createSells(buys),buys=[],prices=[]}),1e3)}async function buildBuys(e,r,t){let a=(await getPrice(e,r)).data.ethereum.dexTrades[0];if(void 0!==a){let r=Number(a.baseAmount)/Number(a.quoteAmount),n={};n.exchangeName=a.exchange.fullName,n.exchangeAddress=e,n.price=r,n.symbol=t,prices.push(r),buys.push(n)}}async function createSwapCards(){savedImages=await getSavedImages;let e="",r=(await getTrades()).data.ethereum.dexTrades,t=[];r.forEach((e=>{let r;r=e.median_price>e.last_price?e.median_price-e.last_price:e.last_price-e.median_price/e.count,t.push({symbol:`${e.buyCurrency.symbol}`,address:`${e.buyCurrency.address.toString()}`,tradeCount:`${e.count}`,volatilityScore:r.toFixed(5)})})),t.sort((function(e,r){return e.volatilityScore-r.volatilityScore})),t.reverse(),t.forEach((r=>{imageUrl="#",getImage(r.symbol);let t=`<div class="swap_card" onClick="swapClick(this,'${r.address}')">\n                        <div class="token_img">\n                          <img src='${imageUrl}' alt='logo for ${r.symbol}' />\n                        </div>\n                        <div class='details_left'>\n                          <div class='symbol'>\n                            ${r.symbol}\n                          </div>\n                          <div class='label'>\n                            T${r.tradeCount}\n                          </div>\n                        </div>\n                        <div class='details_right'>\n                          <div class='score'>\n                            ${r.volatilityScore}\n                          </div>\n                          <div class='label'>\n                            VOLATILITY\n                          </div>\n                        </div>\n                      </div>`;e+=t,$(".swaps").empty(),$(".swaps").prepend(e)}))}async function createSells(e,r){for($(".sells").empty(),i=0;i<e.length;i++){let r=e[i].price-avgPrice;r=Number(r).toFixed(6),html="";let t=`<div class="sell_card" onClick="sellClick(this, '${e[i].exchangeAddress}', ${e[i].price})">\n                                <div class="token_img">\n                                  <img src='../img/${e[i].symbol}.png' alt='logo for ${e[i].symbol}.png' />\n                                </div>\n                                <div class='details_left'>\n                                  <div class='symbol'>\n                                    ${e[i].symbol}\n                                  </div>\n                                  <div class='label'>\n                                    $${e[i].price.toFixed(5)}\n                                  </div>\n                                </div>\n                                <div class='details_right'>\n                                  <div class='price'>\n                                    ${r}\n                                  </div>\n                                  <div class='label'>\n                                    ${e[i].exchangeName}\n                                  </div>\n                                </div>\n                              </div>`;html+=t,$(".sells").prepend(html)}}async function createBuys(e,r){for($(".buys").empty(),i=0;i<e.length;i++){let r=e[i].price-avgPrice;r=Number(r).toFixed(6),html="";let t=`<div class="buy_card" onClick="buyClick(this, '${e[i].exchangeAddress}', ${e[i].price})">\n                                <div class="token_img">\n                                  <img src='../img/${e[i].symbol}.png' alt='logo for ${e[i].symbol}' />\n                                </div>\n                                <div class='details_left'>\n                                  <div class='symbol'>\n                                    ${e[i].symbol}\n                                  </div>\n                                  <div class='label'>\n                                    $${e[i].price.toFixed(5)}\n                                  </div>\n                                </div>\n                                <div class='details_right'>\n                                  <div class='price'>\n                                    ${r}\n                                  </div>\n                                  <div class='label'>\n                                    ${e[i].exchangeName}\n                                  </div>\n                                </div>\n                              </div>`;html+=t,$(".buys").prepend(html)}}async function getFlashLoanPool(){for(DODOFactoryABI=await getDODOFactoryABI.responseJSON,DODOPoolABI=await getDODOPoolABI.responseJSON,flashLoanFactory=await new web3.eth.Contract(DODOFactoryABI,"0x79887f65f83bdf15Bcc8736b5e5BcDB48fb8fE13"),flashLoanPools=await flashLoanFactory.methods.getDODOPool(loanTokenAddress,"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063").call(),i=0;i<flashLoanPools.length;i++)checkPool(flashLoanPools[i])}async function checkPool(e){DODOPoolContract=await new web3.eth.Contract(DODOPoolABI,e),await DODOPoolContract.methods._BASE_RESERVE_().call()>1e4&&(flashLoanPool=e)}async function getPrice(e,r){var t=new Headers;t.append("X-API-KEY","BQYKwXxx3N1v4QK8q8i4wSW8x3murMYp"),t.append("Content-Type","application/json");var a={method:"POST",headers:t,body:JSON.stringify({query:'query ($network: EthereumNetwork!, $address: String!, $quote: String!, $token: String!, $limit: Int!, $offset: Int!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\r\n  ethereum(network: $network) {\r\n    dexTrades(\r\n      options: {desc: ["block.height", "tradeIndex"], limit: $limit, offset: $offset}\r\n      date: {since: $from, till: $till}\r\n      baseCurrency: {is: $token}\r\n      quoteCurrency: {is: $quote}\r\n      exchangeAddress: {is: $address}\r\n    ) {\r\n      block {\r\n        timestamp {\r\n          time(format: "%Y-%m-%d %H:%M:%S")\r\n        }\r\n        height\r\n      }\r\n      tradeIndex\r\n      protocol\r\n      exchange {\r\n        fullName\r\n        address {\r\n            address\r\n        }\r\n      }\r\n      smartContract {\r\n        address {\r\n          address\r\n          annotation\r\n        }\r\n      }\r\n      baseAmount\r\n      baseCurrency {\r\n        address\r\n        symbol\r\n      }\r\n      quoteAmount\r\n      quoteCurrency {\r\n        address\r\n        symbol\r\n      }\r\n      transaction {\r\n        hash\r\n      }\r\n    }\r\n  }\r\n}\r\n',variables:{limit:1,offset:0,network:"matic",address:e,token:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",quote:r,from:DaysAgo,till:rightNow,dateFormat:"%Y-%m-%d"}}),redirect:"follow"};try{let e=await fetch("https://graphql.bitquery.io",a).then((e=>e.json()));return await e}catch(e){console.log(e)}}async function getExchanges(e){var r=new Headers;r.append("X-API-KEY","BQYKwXxx3N1v4QK8q8i4wSW8x3murMYp"),r.append("Content-Type","application/json");var t={method:"POST",headers:r,body:JSON.stringify({query:'query ($network: EthereumNetwork!, $token: String!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\r\n  ethereum(network: $network) {\r\n    dexTrades(\r\n      options: {desc: "amount"}\r\n      date: {since: $from, till: $till}\r\n      baseCurrency: {is: $token}\r\n      protocol: {is: "Uniswap v2"}\r\n      exchangeName: {not: ""}\r\n    ) {\r\n      exchange {\r\n        fullName\r\n        address {\r\n          address\r\n        }\r\n      }\r\n      baseCurrency {\r\n          symbol\r\n      }\r\n      amount: baseAmount\r\n    }\r\n  }\r\n}\r\n',variables:{limit:100,offset:0,network:"matic",token:e,from:DaysAgo,till:rightNow,dateFormat:"%Y-%m-%d"}}),redirect:"follow"};try{let e=await fetch("https://graphql.bitquery.io",t).then((e=>e.json()));return await e}catch(e){console.log(e)}}async function getTrades(){var e=new Headers;e.append("X-API-KEY","BQYKwXxx3N1v4QK8q8i4wSW8x3murMYp"),e.append("Content-Type","application/json");var r={method:"POST",headers:e,body:JSON.stringify({query:'query ($network: EthereumNetwork!, $limit: Int!, $offset: Int!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\r\n  ethereum(network: $network) {\r\n    dexTrades(\r\n      options: {desc: "count", limit: $limit, offset: $offset}\r\n      date: {since: $from, till: $till}\r\n      sellCurrency: {is: "0x2791bca1f2de4661ed88a30c99a7a9449aa84174"}\r\n    ) {\r\n      sellCurrency {\r\n        symbol\r\n        address\r\n      }\r\n      sellAmount\r\n      buyCurrency {\r\n        symbol\r\n        address\r\n      }\r\n      buyAmount\r\n      average_buyAmount: buyAmount(calculate: average)\r\n      count\r\n      median_price: price(calculate: median)\r\n      last_price: maximum(of: block, get: price)\r\n      price\r\n      dates: count(uniq: dates)\r\n      started: minimum(of: date)\r\n    }\r\n  }\r\n}',variables:{limit:100,offset:0,network:"matic",from:DaysAgo,till:rightNow,dateFormat:"%Y-%m-%d"}}),redirect:"follow"};try{let e=await fetch("https://graphql.bitquery.io",r);return await e.json()}catch(e){console.log(e)}}async function getImage(e){if(void 0!==savedImages[e])imageUrl=savedImages[e];else{let r=await $.getJSON(`https://min-api.cryptocompare.com/data/all/coinlist?summary=true&fsym=${e}&api_key=93b95d279c8922ca2c0186a61426b341ec206777e39dc3481d475d407d718892`).done((function(e){return e})),t=await r.Data;if(void 0===t)return"#";{let r=t[e].ImageUrl;if(void 0===r)return"#";{let t=`https://www.cryptocompare.com${r}`;savedImages[e]=t,imageUrl=t}}}}async function getUserAddress(){let e=await ethereum.request({method:"eth_requestAccounts"});userAddress=e[0],$(".enableEthereumButton").html(userAddress)}maxBuySpend=1e4,$(document).ready((function(){$(".confirmation_button").click((function(){sendClick()})),$(".test_button").click((function(){testClick()})),$(".enableEthereumButton").click((()=>{getUserAddress()}))})),createSwapCards()</script><script defer="defer" src="/static/js/main.162ae4f7.js"></script><link href="/static/css/main.035f094e.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"></div></body></html>